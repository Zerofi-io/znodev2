# ==============================================================================
# ZNode v3 - Sepolia .env (shared template)
# Each VPS/node: ONLY set PRIVATE_KEY below.
# ==============================================================================

# -------- Node identity (per VPS) --------
# Ethereum private key for this node (0x-prefixed, 64 hex chars)
PRIVATE_KEY=0xYOUR_PRIVATE_KEY_HERE

# -------- Ethereum RPC --------
RPC_URL=https://ethereum-sepolia-rpc.publicnode.com
CHAIN_ID=11155111  # Sepolia testnet chain ID (required for P2P signature verification)

# -------- Contract addresses (same for all nodes) --------
REGISTRY_ADDR=0x82a9E750417EfdC22ff32d7cfF25C283d6C0cd87
ZFI_ADDR=0x7bdFAE73c17aFAaA2DCCbD115F4CD920e40ad071
STAKING_ADDR=0x1D21b7d6871104b77bca3F50032c3aa75C838a3E
COORDINATOR_ADDR=0x6119195691d1C3D5C4D4C91f61015080F879a84c

# -------- Cluster parameters --------
CLUSTER_SIZE=11
CLUSTER_THRESHOLD=7         # 7-of-11 multisig (REQUIRED: do not change)
LIVENESS_QUORUM=11          # require all 11 nodes to answer liveness ping (subsequent rounds require all N)

# -------- P2P / libp2p --------
P2P_IMPL=libp2p
P2P_PORT=26005
ORACLE_P2P_PORT=26015
P2P_REQUIRE_E2E=1
# Public IP used for P2P announcements (optional but recommended)
PUBLIC_IP=
# Allow connecting to TLS peers with self-signed/invalid certs (0 = enforce, 1 = allow)
P2P_TLS_REJECT_UNAUTHORIZED=0

# Enable this node to run the P2P heartbeat oracle (0 = disabled, 1 = enabled)
ENABLE_HEARTBEAT_ORACLE=1

# Bootstrap to this VPS as the entry point (same on all nodes)
# Replace IP if this nodeâ€™s public IP is not 185.191.116.142
P2P_BOOTSTRAP_PEERS=/ip4/185.191.116.142/tcp/26005/p2p/12D3KooWSjKUcCmP6EyqrwMYJA6YTq63LrzserMFmQGB73yk6iAt

# Optional: local cache of recently seen peers (defaults to ~/.znode/p2p-peers.json)
# P2P_PEER_STORE=./p2p-peers.json

# P2P message freshness and clock skew tolerances (milliseconds)
# P2P_MESSAGE_MAX_AGE_MS=180000    # 3 minutes (tightened from 5 min for production)
# P2P_CLOCK_SKEW_MS=60000          # 1 minute (tightened from 2 min for production)

# -------- Monero wallet RPC --------
# monero-wallet-rpc should be started with ./start-monero-rpc.sh on each VPS
MONERO_RPC_URL=http://127.0.0.1:18083

# Password used for creating/opening the Monero wallets created by znode
# (same on all VPSs is fine for this testnet deployment)
MONERO_WALLET_PASSWORD=znode_monero_pw

# RPC auth for monero-wallet-rpc (same here AND in the env when you run start-monero-rpc.sh)
MONERO_WALLET_RPC_USER=znode_rpc
MONERO_WALLET_RPC_PASSWORD=znode_rpc_pw

# -------- Modes / safety flags --------
# Production-style mode on Sepolia (no insecure TEST_MODE shortcuts)
TEST_MODE=0

# Send real transactions on Sepolia (set to 1 if you want dry-run only)
DRY_RUN=0

# Wallet backup encryption passphrase (REQUIRED in production mode)
# Use a strong, unique passphrase (20+ characters recommended)
WALLET_BACKUP_PASSPHRASE=your-strong-passphrase-here

# -------- Shamir/SST (disabled) --------
ENABLE_SST=0
SST_THRESHOLD=7
SST_TOTAL_SHARES=11
SST_STORAGE_DIR=./sst-data
SST_ENC_SCHEME=eth-ecdh-v1
# SST_STORAGE_PASSPHRASE can be left unset while ENABLE_SST=0

# -------- Optional tuning (defaults are usually fine) --------
HEARTBEAT_INTERVAL=30        # seconds; default 30
STALE_ROUND_MIN_AGE_MS=600000
STICKY_QUEUE=0
FORCE_SELECT=0
# MAX_REGISTERED_SCAN=256
# MAX_REGISTERED_PAGES=10
# SELECTION_EPOCH_BLOCKS=20

# -------- Staking configuration --------
# Your Monero address for receiving fees from exchanges (REQUIRED for staking)
MONERO_FEE_ADDRESS=

# Enable automatic staking (set to 1 to enable)
# AUTO_STAKE=1

# -------- Emergency Sweep Configuration --------
# Recovery address for emergency sweep when no other live clusters exist
# REQUIRED: Set this to your Monero recovery address
# RECOVERY_SWEEP_ADDRESS=49zjhXcCGSmiUi2mk2b1m62eyfiF8Ns6iJmagnJozHQ2QQHqUxjCmUKVp8zj9Hc5noXQVW54D2PDpTdQPY5wV3gSSF1Fqx7

# Time threshold for considering a node offline (milliseconds)
# Default: 172800000 (48 hours)
# SWEEP_OFFLINE_MS=172800000

# Notice period before executing sweep (milliseconds)
# Default: 0 (immediate execution after consensus)
# SWEEP_NOTICE_MS=0

# Rate limit for sweep proposals (milliseconds)
# Prevents spam proposals - only one proposal per cluster per period
# Default: 86400000 (24 hours)
# SWEEP_RATE_LIMIT_MS=86400000

# Enable emergency sweep feature (set to 1 to enable)
# Default: 1 (enabled)
# ENABLE_EMERGENCY_SWEEP=1
